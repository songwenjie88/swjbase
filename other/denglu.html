<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form>
        <label for="name">name</label>
        <input type="text" id="name">
        <label for="account">account</label>
        <input type="text" id="account">
        <label for="password">password</label>
        <input type="text" id="password">
        <button>注册</button>
    </form>
</body>
<script>
    var inputs, btn, form
        init();
        function init() {
            form = document.querySelector("form")
            inputs = document.querySelectorAll("input")
            btn = document.querySelector("button");
            form.addEventListener("submit", submitHandler);
            btn.addEventListener("click", clickHandler)
        }
        function submitHandler(e) {
            e.preventDefault()
        }
        function clickHandler() {
            var data = {
                // name : inputs[0].value,
                account : inputs[1].value,
                password : inputs[2].value,
            }
            ajax(data);
        }
        function ajax(data) {
            var xhr = new XMLHttpRequest();
            xhr.addEventListener("load", loadHadler);
            xhr.open("POST", "http://10.20.159.169:5000/login");
            xhr.send(JSON.stringify(data))
        }
        function loadHadler(e) {
            try {
                var a = JSON.parse(e.currentTarget.response);
                sessionStorage.name = a.name;
                location.href = "./home.html"
                
            } catch {
                alert("账户或密码错误");
            }
        }
</script>
</html>